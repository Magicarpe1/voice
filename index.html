<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Réservation Express</title>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCcL0S_zj3w-AqPnRYEGjMiT2P1UutX3LE&libraries=places"></script>

  <style>
    body {
      background: #121212;
      font-family: sans-serif;
      color: #FFF;
      padding: 20px;
    }

    .pac-container {
      background-color: #262626 !important;
      color: #CCC !important;
      border-radius: 8px;
      border: 1px solid #333;
      font-family: sans-serif;
    }

    .pac-item {
      color: #CCC !important;
      padding: 8px 12px;
    }

    .pac-item:hover {
      background-color: #333 !important;
    }

    .pac-icon {
      filter: invert(100%) brightness(80%);
    }

    input[type="date"], 
    input[type="time"],
    input[type="text"] {
      color-scheme: dark;
      background:#262626;
      color:#FFF;
      width:100%;
      margin-top:8px;
      padding:10px 15px;
      border-radius:8px;
      border:none;
      box-sizing:border-box;
    }

    ::-webkit-calendar-picker-indicator {
      filter: invert(1);
      cursor: pointer;
    }

    .label-with-icon {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .icon-svg {
      width: 20px;
      height: 20px;
      vertical-align: middle;
      fill: currentColor;
    }
  </style>
</head>

<body>

<div style="background:#1A1A1A;border-radius:12px;padding:30px;max-width:1100px;margin:auto;box-sizing:border-box;">
  <div style="margin-bottom:20px;">
    <h2 style="font-size:22px;">Réservation Express</h2>
  </div>

  <div style="display:flex;gap:30px;">
    <div style="flex:1;">
      <label class="label-with-icon">
        Lieu de départ
      </label>
      <input id="autocomplete_depart" placeholder="Entrez votre lieu de départ" type="text">

      <label style="display:block;margin-top:20px;">
        Date
      </label>
      <input type="date" placeholder="Date">
    </div>

    <div style="flex:1;">
      <label class="label-with-icon">
        Destination
      </label>
      <input id="autocomplete_destination" placeholder="Entrez votre destination" type="text">

      <label style="display:block;margin-top:20px;" class="label-with-icon">
        Heure
      </label>
      <input type="time" placeholder="Heure">
    </div>
  </div>

  <div style="background-color:#262626;border-radius:12px;padding:25px;text-align:center;margin-top:25px;">
    <img src="https://ik.imagekit.io/lakolo/eyJidWNrZXQiOiJkYXRhay1jZG4teHkiLCJlZGl0cyI6e30sImtleSI6ImNvbmZpZ3VyYXRvci1pbWdzL2NhcnMvZnIvODAwL1RPWU9UQS9QUk9BQ0UtVkVSU08tRUxFQ1RSSUMvNDg3NThfTU9OT1NQQUNFLTUtUE9SVEVTL25vaXItcGVybGEtbmVyYS1tZXRhbGxpc2UucG5nIn0=.png?updatedAt=1746260324316"
      alt="Voiture sélectionnée" style="width:250px;margin:auto;">

    <h3 style="margin-top:15px;">TOYOTA PROACE</h3>
    <div style="color:#AAA;">Passagers : 9</div>
  </div>

  <div style="display:flex;justify-content:space-between;align-items:center;margin-top:25px;">
  <div style="display:flex;align-items:center;gap:8px;">
    <button style="width:30px;height:30px;border-radius:50%;border:none;background:#262626;color:#FFF;">–</button>
    <span>1</span>
    <button style="width:30px;height:30px;border-radius:50%;border:none;background:#262626;color:#FFF;">+</button>
  </div>

  <div style="display:flex;align-items:center;gap:10px;">
    <div id="prixEstime" style="color:#FFF;font-weight:bold;background-color:#262626;padding:10px 15px;border-radius:6px;display:none;"></div>
    <button id="estimate-btn" style="background-color:#444;color:#FFF;border:none;padding:12px 20px;border-radius:6px;">ESTIMER LE PRIX</button>
    <button style="background-color:#007bff;color:#FFF;border:none;padding:12px 20px;border-radius:6px;">RÉSERVER</button>
  </div>
</div>

<script>
  let autocompleteDepart, autocompleteDestination;

  function initAutocomplete() {
    const options = { types: ['geocode'], componentRestrictions: {country: 'fr'} };
    autocompleteDepart = new google.maps.places.Autocomplete(document.getElementById('autocomplete_depart'), options);
    autocompleteDestination = new google.maps.places.Autocomplete(document.getElementById('autocomplete_destination'), options);
  }

  function estimerPrix() {
    const depart = document.getElementById('autocomplete_depart').value;
    const destination = document.getElementById('autocomplete_destination').value;
    const prixEstime = document.getElementById('prixEstime');

    if (!depart || !destination) {
      prixEstime.textContent = "Veuillez saisir les lieux de départ et de destination.";
      prixEstime.style.display = "block";
      return;
    }

    const directionsService = new google.maps.DirectionsService();
    directionsService.route({
      origin: depart,
      destination: destination,
      travelMode: google.maps.TravelMode.DRIVING,
    }, (response, status) => {
      if (status === 'OK') {
        const distanceEnMetres = response.routes[0].legs[0].distance.value;
        const distanceEnKm = distanceEnMetres / 1000;
        
        let prixTotal;
        if (distanceEnKm < 4) {
          prixTotal = 10;
        } else {
          prixTotal = distanceEnKm * 2.5;
        }

        prixEstime.textContent = `Distance : ${distanceEnKm.toFixed(1)} km | Prix : ${prixTotal.toFixed(2)} €`;
        prixEstime.style.display = "block";

      } else {
        prixEstime.textContent = "Erreur lors du calcul";
        prixEstime.style.display = "block";
      }
    });
  }

  window.addEventListener('load', () => {
    initAutocomplete();
    document.getElementById('estimate-btn').addEventListener('click', estimerPrix);
  });
</script>

</body>
</html>
